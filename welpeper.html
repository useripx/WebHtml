<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfect Wallpaper Match</title>
    <style>
        * { box-sizing: border-box; }
        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; font-family: sans-serif; background: #000; }
        
        #bg {
            width: 100%; height: 100vh;
            background-position: center; background-size: cover;
            display: flex; align-items: center; justify-content: center;
            transition: background-image 0.3s ease;
        }

        .container {
            background: rgba(0,0,0,0.7); color: white; padding: 30px;
            border-radius: 20px; text-align: center; backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2); width: 90%; max-width: 350px;
        }

        .btn-group { display: flex; flex-direction: column; gap: 12px; margin-top: 20px; }
        
        button, a {
            padding: 15px; border-radius: 12px; border: none;
            font-weight: bold; cursor: pointer; text-decoration: none; display: block;
        }

        .btn-refresh { background: #fff; color: #000; }
        .btn-download { background: #e74c3c; color: #fff; }
        
        .loading-text { font-size: 12px; margin-top: 10px; color: #f1c40f; display: none; }
    </style>
</head>
<body>

<div id="bg">
    <div class="container">
        <h2 id="status">Mencari Gambar...</h2>
        <div class="btn-group">
            <button class="btn-refresh" onclick="getNewWallpaper()">ðŸ”„ Ganti Wallpaper</button>
            <a id="download-link" href="#" target="_blank" class="btn-download">ðŸ“¥ Download Gambar Ini</a>
        </div>
        <p id="loader" class="loading-text">Menyiapkan gambar...</p>
    </div>
</div>

<script>
    async function getNewWallpaper() {
        const bg = document.getElementById('bg');
        const dlBtn = document.getElementById('download-link');
        const loader = document.getElementById('loader');
        const status = document.getElementById('status');
        
        loader.style.display = 'block';
        status.innerText = "Memuat...";

        const isMobile = window.innerWidth <= 768;
        const w = isMobile ? 1080 : 1920;
        const h = isMobile ? 1920 : 1080;

        try {
            // Step 1: Ambil info gambar acak dari API List
            const randomPage = Math.floor(Math.random() * 100);
            const response = await fetch(`https://picsum.photos/v2/list?page=${randomPage}&limit=1`);
            const data = await response.json();
            const imgId = data[0].id; // Ambil ID unik gambar

            // Step 2: Buat URL permanen berdasarkan ID tersebut
            // Format: https://picsum.photos/id/{id}/{width}/{height}
            const finalUrl = `https://picsum.photos/id/${imgId}/${w}/${h}`;

            // Step 3: Terapkan ke Background dan Link Download
            bg.style.backgroundImage = `url('${finalUrl}')`;
            dlBtn.href = finalUrl;
            
            status.innerText = "Wallpaper Siap!";
            loader.style.display = 'none';

        } catch (error) {
            // Fallback jika API list gagal, gunakan random biasa
            const fallbackUrl = `https://picsum.photos/${w}/${h}?random=${Math.random()}`;
            bg.style.backgroundImage = `url('${fallbackUrl}')`;
            dlBtn.href = fallbackUrl;
            status.innerText = "Wallpaper Acak";
            loader.style.display = 'none';
        }
    }

    window.onload = getNewWallpaper;
</script>

</body>
</html>
